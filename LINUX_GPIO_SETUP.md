# üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–µ–∑ pigpio (Linux GPIO)

## üìã –ü—Ä–æ–±–ª–µ–º–∞ —Å pigpio

–ï—Å–ª–∏ –ø–∞–∫–µ—Ç `pigpio` –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **Linux GPIO –≤–µ—Ä—Å–∏—é** –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

## üöÄ –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### **1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∞–∑–æ–≤—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–µ–∑ pigpio
sudo apt update
sudo apt install -y build-essential cmake pkg-config
sudo apt install -y libopencv-dev python3-opencv
sudo apt install -y libjpeg-dev libtiff5-dev libpng-dev
sudo apt install -y libavcodec-dev libavformat-dev libswscale-dev
sudo apt install -y libgtk2.0-dev libcanberra-gtk*
sudo apt install -y libv4l-dev v4l-utils
sudo apt install -y python3-pip python3-dev
sudo apt install -y libgtk-3-dev libcairo2-dev libpango1.0-dev
```

### **2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã:**
```bash
# –í–∫–ª—é—á–µ–Ω–∏–µ SPI
echo "dtparam=spi=on" | sudo tee -a /boot/firmware/config.txt
echo "dtoverlay=spi0-2cs" | sudo tee -a /boot/firmware/config.txt

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞
sudo reboot
```

### **3. –°–±–æ—Ä–∫–∞ Linux GPIO –≤–µ—Ä—Å–∏–∏:**
```bash
# –°–±–æ—Ä–∫–∞ –±–µ–∑ pigpio
make linux

# –ò–ª–∏ GUI –≤–µ—Ä—Å–∏—è
make gui
```

## üîß –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Linux GPIO –≤–µ—Ä—Å–∏—è

### **–í–º–µ—Å—Ç–æ pigpio –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:**
- **`/sys/class/gpio/`** - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π Linux GPIO –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **`/dev/spidev0.0`** - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π Linux SPI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **`ioctl()`** - —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã –¥–ª—è SPI

### **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ **–ù–µ—Ç –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** - —Ç–æ–ª—å–∫–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ª—é–±–æ–º Linux** - –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
- ‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- ‚úÖ **–ü—Ä–æ—Å—Ç–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞** - –Ω–µ –Ω—É–∂–Ω–æ –∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å pigpio

## üìÅ –§–∞–π–ª—ã Linux GPIO –≤–µ—Ä—Å–∏–∏

### **–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- **`gpio_linux.c`** - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è GPIO —á–µ—Ä–µ–∑ sysfs
- **`fpv_interceptor_linux`** - –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª
- **`fpv_gui`** - GUI –≤–µ—Ä—Å–∏—è (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞)

### **–§—É–Ω–∫—Ü–∏–∏:**
```c
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
int rx5808_init_linux(void);

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–∞—Å—Ç–æ—Ç—ã
int rx5808_set_frequency_linux(uint16_t frequency);

// –ß—Ç–µ–Ω–∏–µ RSSI
uint8_t rx5808_read_rssi_linux(void);

// –û—á–∏—Å—Ç–∫–∞
int rx5808_cleanup_linux(void);
```

## üöÄ –ó–∞–ø—É—Å–∫

### **–ö–æ–Ω—Å–æ–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è:**
```bash
# –ó–∞–ø—É—Å–∫ Linux GPIO –≤–µ—Ä—Å–∏–∏
./fpv_interceptor_linux
```

### **GUI –≤–µ—Ä—Å–∏—è:**
```bash
# –ó–∞–ø—É—Å–∫ GUI –≤–µ—Ä—Å–∏–∏
./fpv_interceptor_gui
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GPIO

### **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:**
```bash
# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É gpio
sudo usermod -a -G gpio $USER

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
sudo reboot
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ GPIO:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ GPIO
ls /sys/class/gpio/

# –≠–∫—Å–ø–æ—Ä—Ç –ø–∏–Ω–∞ (–ø—Ä–∏–º–µ—Ä)
echo 7 > /sys/class/gpio/export
echo in > /sys/class/gpio/gpio7/direction
cat /sys/class/gpio/gpio7/value
```

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π

| –§—É–Ω–∫—Ü–∏—è | pigpio –≤–µ—Ä—Å–∏—è | Linux GPIO –≤–µ—Ä—Å–∏—è |
|---------|---------------|-------------------|
| **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** | pigpio –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ | –¢–æ–ª—å–∫–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ |
| **–£—Å—Ç–∞–Ω–æ–≤–∫–∞** | –°–ª–æ–∂–Ω–∞—è | –ü—Ä–æ—Å—Ç–∞—è |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | –í—ã—Å–æ–∫–∞—è | –°—Ä–µ–¥–Ω—è—è |
| **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** | –í—ã—Å–æ–∫–∞—è | –í—ã—Å–æ–∫–∞—è |
| **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** | Raspberry Pi | –õ—é–±–æ–π Linux |

## üõ†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### **GPIO –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤
groups $USER

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—É gpio
sudo usermod -a -G gpio $USER
sudo reboot
```

### **SPI –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ SPI
ls /dev/spi*

# –í–∫–ª—é—á–µ–Ω–∏–µ SPI
echo "dtparam=spi=on" | sudo tee -a /boot/firmware/config.txt
sudo reboot
```

### **–û—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏:**
```bash
# –û—á–∏—Å—Ç–∫–∞ –∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞
make clean
make linux
```

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Linux GPIO –≤–µ—Ä—Å–∏—é –µ—Å–ª–∏:**
- ‚ùå pigpio –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö
- ‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–º–ø–∏–ª—è—Ü–∏–µ–π pigpio
- ‚úÖ –ù—É–∂–Ω–∞ –ø—Ä–æ—Å—Ç–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
- ‚úÖ –†–∞–±–æ—Ç–∞ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞—Ö Linux

### **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ pigpio –≤–µ—Ä—Å–∏—é –µ—Å–ª–∏:**
- ‚úÖ pigpio –¥–æ—Å—Ç—É–ø–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ù—É–∂–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ GPIO

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### **–¢–µ—Å—Ç GPIO:**
```bash
# –≠–∫—Å–ø–æ—Ä—Ç –ø–∏–Ω–∞
echo 7 > /sys/class/gpio/export

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞–∫ –≤—Ö–æ–¥
echo in > /sys/class/gpio/gpio7/direction

# –ß—Ç–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
cat /sys/class/gpio/gpio7/value

# –û—á–∏—Å—Ç–∫–∞
echo 7 > /sys/class/gpio/unexport
```

### **–¢–µ—Å—Ç SPI:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ SPI —É—Å—Ç—Ä–æ–π—Å—Ç–≤
ls /dev/spi*

# –¢–µ—Å—Ç SPI (—Ç—Ä–µ–±—É–µ—Ç root)
sudo dd if=/dev/zero of=/dev/spidev0.0 bs=1 count=1
```

---

**üéØ Linux GPIO –≤–µ—Ä—Å–∏—è –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ!**

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å —Ä–∞–±–æ—á–∞—è –≤–µ—Ä—Å–∏—è FPV Interceptor –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç pigpio, –∏—Å–ø–æ–ª—å–∑—É—é—â–∞—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ Linux –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã.
